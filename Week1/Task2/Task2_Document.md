# Task2

## 一. ARM架构

### 1. ARM的定义

​		**ARM架构（Advanced RISC Machine）**是一种使用精简指令集计算（RISC）原则设计的处理器架构。它最初由Acorn Computers公司开发，后来发展成为一个独立的公司——ARM Holdings，专门从事ARM架构的设计和授权。

### 2. ARM架构的分类

​		Arm架构是世界上最流行的处理器架构之一。下表描述了三种架构配置文件：A、R和M：

| A-profile                             | R-profile                  | M-profile        |
| ------------------------------------- | -------------------------- | ---------------- |
| 高性能                                | 实时性强                   | 小型设备，高效率 |
| 常用于复杂操作系统（如Linux,Windows） | 常用于网络设备和嵌入式系统 | 常用于物联网设备 |

​		搭载ARM的设备内部结构示意图如下：

![image-20241231180632209](C:\Users\17716\AppData\Roaming\Typora\typora-user-images\image-20241231180632209.png)



### 3. ARM的结构

![image-20241231182024553](C:\Users\17716\AppData\Roaming\Typora\typora-user-images\image-20241231182024553.png)

​		Arm架构是第一层，通过指令集架构（ISA）兼容性为软件提供一个通用的程序员模型。

​		基本系统体系架构（BSA）规范描述了系统软件可以依赖的硬件系统体系架构，BSA涵盖了处理器和系统架构的各个方面，例如中断控制器、计时器和操作系统所需的其他常见设备。这为标准操作系统、管理程序和固件提供了可靠的平台。BSA广泛适用于不同的市场和用例。其他标准可以建立在BSA的基础上，以提供特定于市场的标准化。

​		基本引导需求（BBR）规范涵盖了基于Arm架构的系统以及操作系统和管理程序可以依赖的系统的需求。本规范建立了固件接口要求，如PSCI、SMCCC、UEFI、ACPI和SMBIOS。BBR还提供了针对特定用例的方法。

​		以CORTEX-A72为例，ARM微观架构如下：

![image-20241231182511889](C:\Users\17716\AppData\Roaming\Typora\typora-user-images\image-20241231182511889.png)



## Q&A

 - ### Q1 NOR flash和Nand flash的区别?

   ​		**NOR flash**，也称为**NOR型闪存**，是一种**非易失性存储器（NVM）**，它可以在不需要持续电力供应的情况下保留存储的数据；**Nand flash** 是一种**非易失性存储器**，内部采用非线性宏单元模式，为固态大容量内存的实现提供了廉价有效的解决方案。它们的区别体现在如下几个方面：

   **1.读取方面**
   		NOR flash的最小读取单位是字节（Byte），Nand flash的最小读取单位是页（Page）。

   **2.擦除方面**
   		NOR flash的最小擦除单位是扇区（SECTOR），Nand flash的最小擦除单位是块（Block）。

   **3.写入方面**
   		NOR flash的最小写入单位是字节（Byte），Nand flash的最小写入单位是页（Page）。

   **4.速度方面**
   		NOR flash的读取速度更快，nand falsh的写入速度更快。

   **5.寿命和可靠性**
   		NOR flash具有较高的可靠性和耐久性，适用于存储关键数据和固件; Nand falsh在存储密度方面表现出色，但相对于NOR Flash，其寿命和可靠性较低，更适合用于存储大容量数据。

   **6.成本方面**
   		NOR flash由于其内部复杂的架构，导致其成本相对较高; Nand falsh由于其高存储密度，使得单位容量的成本相对较低。

 - ### Q2 CPU、MCU、SOC之间的区别?

   **CPU(中央处理器):** CPU是计算机的大脑。它是一块硅芯片，负责执行计算机程序中的指令。CPU包含运算单元、控制单元和缓存，通过时钟信号按照指令集执行各种操作, 是计算机的核心组件，掌握着整个系统的运行节奏。

   **MCU(微控制器): **MCU是一种包含CPU核心、存储器和外设接口的微型计算机系统。与通用计算机不同，MCU通常用于嵌入式系统中，其设计旨在满足特定应用的需求。常见的应用包括家电、汽车控制系统、医疗设备等。MCU的特点是小巧、低功耗，适用于对成本和功耗有严格要求的场景。

   **SoC(片上系统)**：SoC是一种将多个功能集成到一个芯片上的设计。一个SoC通常包括CPU、内存、图形处理器、网络控制器、输入输出接口等多个组件。SoC常见于移动设备（如智能手机、平板电脑）和嵌入式系统，通过集成多个功能模块，提高了系统性能，同时降低了功耗和成本。

   它们的区别如下：

   **规模和用途：**
   CPU： 专注于通用计算，广泛应用于个人计算机、服务器等。

   MCU： 集成了计算、存储和通信功能，适用于嵌入式系统、物联网设备等。

   SoC： 集成多个功能组件，主要用于移动设备、嵌入式系统等。

   **集成度：**
   CPU： 通常作为独立的芯片存在。

   MCU： 与SoC类似，集成度较高，但规模通常更小。

   SoC： 将多个功能集成在一个芯片上，提高了系统的紧凑性。

   **应用领域：**
   CPU： 适用于各种通用计算任务。

   MCU： 适用于嵌入式系统、物联网、自动控制等特定领域。

   SoC： 适用于移动设备、嵌入式系统、物联网等领域。

   **功耗和性能：**
   CPU： 注重性能，功耗相对较高

   MCU： 低功耗是其主要特点，性能相对较低。

   SoC： 追求平衡，兼顾性能和功耗。

 - ### Q3 什么是交叉编译?

   交叉编译是在一个平台上生成另一个平台的可执行代码。

 - ### Q4 什么是冯诺依曼结构和哈弗结构?

   ​		**冯·诺依曼结构（von Neumann architecture）**和**哈佛结构（Harvard architecture）**是计算机系统中两种常见的指令和数据存储方式。示意图如下：

   ![image-20241231190501238](C:\Users\17716\AppData\Roaming\Typora\typora-user-images\image-20241231190501238.png)

   ​		**冯·诺依曼结构**是一种经典的计算机体系结构，由冯·诺依曼于1945年提出。它将指令和数据存储在同一个存储器中，并使用同一套总线进行数据传输。在冯·诺依曼结构中，计算机的指令和数据被存储在内存中的同一地址空间中，CPU通过抓取指令和数据来执行程序。这种结构具有程序存储器和数据存储器的明显分离，使得指令和数据可以在存储器和CPU之间自由传输。大多数现代计算机系统都采用了冯·诺依曼结构。

   ​		**哈佛结构**是另一种常见的计算机体系结构，最早由哈佛大学提出。在哈佛结构中，指令存储器和数据存储器是物理上分开的，使用不同的总线进行数据传输。指令存储器用于存储程序的指令，数据存储器用于存储程序的数据。哈佛结构的一个优势是可以同时抓取指令和数据，这提高了执行效率。然而，哈佛结构对硬件的要求更高，因为需要独立的指令和数据存储器。

 - ### Q5 ARM分为哪些异常等级？

   ​		在ARM架构中，定义了四个异常等级（Exception Levels, EL），它们从EL0到EL3递增，每个等级对应不同的执行权限和用途。

   ![image-20241231191358054](C:\Users\17716\AppData\Roaming\Typora\typora-user-images\image-20241231191358054.png)

   

   - **EL0 (Exception Level 0)**: 
     - 这是最底层的异常级别，也被称为用户模式或非特权模式。
     - 主要用于运行普通应用程序代码，这类代码没有直接访问硬件资源的权限，必须通过系统调用等方式请求更高特权级别的服务。

   - **EL1 (Exception Level 1)**:
     - 操作系统内核和其他拥有较高权限的程序通常运行在这个级别。
     - 提供对大多数系统资源的访问权限，包括内存管理和中断处理等关键操作。
     - 在安全状态下，EL1还可以作为受信任的操作系统的一部分来运行。

   - **EL2 (Exception Level 2)**:
     - 主要用于实现虚拟化支持，即Hypervisor模式。
     - 允许一个宿主操作系统管理多个客户机操作系统，每个客户机OS都认为自己独占整个机器，但实际上它们共享物理硬件。
     - 只存在于非安全状态（Normal World）中，因为安全世界的安全性由EL3保证。

   - **EL3 (Exception Level 3)**:
     - 是最高的异常级别，主要用于安全监视器（Secure Monitor）功能。
     - 负责管理和切换安全状态与非安全状态之间的转换，确保系统的安全性。
     - 当处理器处于AArch64状态时，EL3提供了一个比所有其他级别更高的特权级别，允许它控制进入和退出安全模式的过程。

   

   

   